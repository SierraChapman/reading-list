<h1>Reading List</h1>

<h2>Books to Read</h2>

<ul>
    {{#each books}}
        {{#unless was_read}}
            <li>{{title}} <button class="mark-read-button" data-id={{id}}>mark as read</button></li>
        {{/unless}}
    {{/each}}
</ul>

<form action="/api/books/new" method="post" autocomplete="off">
    <label for="new-book-title">Add a book:</label>
    <input type="text" id="new-book-title" name="title" placeholder="Title">
    <input type="submit" value="Submit">
</form>

<h2>Books I've Read</h2>

<ul>
    {{#each books}}
        {{#if was_read}}
            <li>{{title}}</li>
        {{/if}}
    {{/each}}
</ul>

<script>
    $(".mark-read-button").click(event => {
        const id = event.target.dataset.id;
        $.ajax("/api/books/" + id, {
            type: "PUT"
        }).then(() => {
            location.reload();
        });
    });
</script>